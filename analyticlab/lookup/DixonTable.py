# -*- coding: utf-8 -*-
"""
Created on Sat Jan 27 15:06:33 2018

@author: xingrongtech
"""
from analyticlab.system.exceptions import tooMuchDataForTestException, tooLessDataForTestException, confLevelUnsupportedException

oneSide = {}
oneSide[0.95]=(0.941, 0.765, 0.642, 0.562, 0.507, 0.554, 0.512, 0.477, 0.575, 0.546, 0.521, 0.546, 0.524, 0.505, 0.489, 0.475, 0.462, 0.450, 0.440, 0.431, 0.422, 0.413, 0.406, 0.399, 0.393, 0.387, 0.381, 0.376, 0.371, 0.367, 0.362, 0.358, 0.354, 0.350, 0.347, 0.343, 0.340, 0.337, 0.334, 0.331, 0.328, 0.326, 0.323, 0.321, 0.318, 0.316, 0.314, 0.312, 0.310, 0.308, 0.306, 0.304, 0.302, 0.300, 0.298, 0.297, 0.295, 0.294, 0.292, 0.291, 0.289, 0.288, 0.287, 0.285, 0.284, 0.283, 0.282, 0.280, 0.279, 0.278, 0.277, 0.276, 0.275, 0.274, 0.273, 0.272, 0.271, 0.270, 0.269, 0.268, 0.267, 0.266, 0.265, 0.264, 0.263, 0.262, 0.262, 0.261, 0.260, 0.259, 0.259, 0.258, 0.257, 0.256, 0.255, 0.255, 0.254, 0.254)
oneSide[0.99]=(0.988, 0.889, 0.782, 0.698, 0.637, 0.681, 0.635, 0.597, 0.674, 0.642, 0.617, 0.640, 0.618, 0.597, 0.580, 0.564, 0.550, 0.538, 0.526, 0.516, 0.507, 0.497, 0.489, 0.482, 0.474, 0.468, 0.462, 0.456, 0.450, 0.445, 0.441, 0.436, 0.432, 0.427, 0.423, 0.419, 0.416, 0.413, 0.409, 0.406, 0.403, 0.400, 0.397, 0.394, 0.391, 0.389, 0.386, 0.384, 0.382, 0.379, 0.377, 0.375, 0.373, 0.371, 0.369, 0.367, 0.366, 0.363, 0.362, 0.361, 0.359, 0.357, 0.355, 0.354, 0.353, 0.351, 0.350, 0.348, 0.347, 0.346, 0.344, 0.343, 0.342, 0.341, 0.340, 0.338, 0.337, 0.336, 0.335, 0.334, 0.333, 0.332, 0.331, 0.330, 0.329, 0.328, 0.327, 0.326, 0.325, 0.324, 0.323, 0.323, 0.322, 0.321, 0.320, 0.320, 0.319, 0.318)

twoSides = {}
twoSides[0.95]=(0.970, 0.829, 0.710, 0.628, 0.569, 0.608, 0.564, 0.530, 0.619, 0.583, 0.557, 0.587, 0.565, 0.547, 0.527, 0.513, 0.500, 0.488, 0.479, 0.469, 0.460, 0.449, 0.441, 0.436, 0.427, 0.420, 0.415, 0.409, 0.403, 0.399, 0.395, 0.390, 0.388, 0.438, 0.380, 0.377, 0.375, 0.370, 0.367, 0.364, 0.362, 0.359, 0.357, 0.353, 0.352, 0.350, 0.346, 0.343, 0.342, 0.340, 0.338, 0.337, 0.335, 0.334, 0.330, 0.329, 0.327, 0.325, 0.323, 0.321, 0.320, 0.319, 0.318, 0.316, 0.315, 0.313, 0.313, 0.312, 0.310, 0.309, 0.308, 0.306, 0.305, 0.304, 0.304, 0.303, 0.303, 0.302, 0.301, 0.301, 0.301, 0.298, 0.297, 0.297, 0.296, 0.295, 0.294, 0.293, 0.291, 0.290, 0.289, 0.289, 0.288, 0.288, 0.286, 0.285, 0.285, 0.284)
twoSides[0.99]=(0.994, 0.926, 0.821, 0.740, 0.680, 0.717, 0.672, 0.635, 0.709, 0.660, 0.638, 0.669, 0.646, 0.629, 0.614, 0.602, 0.582, 0.570, 0.560, 0.548, 0.537, 0.522, 0.518, 0.509, 0.504, 0.497, 0.489, 0.480, 0.473, 0.468, 0.463, 0.460, 0.458, 0.442, 0.450, 0.447, 0.442, 0.438, 0.433, 0.432, 0.428, 0.425, 0.422, 0.419, 0.416, 0.413, 0.412, 0.409, 0.407, 0.405, 0.402, 0.400, 0.399, 0.399, 0.396, 0.393, 0.390, 0.389, 0.387, 0.385, 0.383, 0.382, 0.379, 0.377, 0.375, 0.376, 0.375, 0.375, 0.373, 0.373, 0.371, 0.370, 0.368, 0.363, 0.363, 0.362, 0.361, 0.358, 0.358, 0.355, 0.355, 0.353, 0.351, 0.351, 0.349, 0.349, 0.347, 0.347, 0.344, 0.344, 0.343, 0.343, 0.343, 0.342, 0.340, 0.340, 0.339, 0.339)


def D(confLevel, n, side):
    if n > 100:
        raise tooMuchDataForTestException('Dixon检验最多只支持100个数据的检验')
    elif n < 3:
        raise tooLessDataForTestException('Dixon检验')
    if side == 1:
        return oneSide[confLevel][n-3]
    elif side == 2:
        return twoSides[confLevel][n-3]