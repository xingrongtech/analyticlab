# -*- coding: utf-8 -*-
"""
Created on Thu Jan 25 18:58:04 2018

@author: xingrongtech
"""
from scipy.stats import t as tt

rep = {0.6826: 0.3652, 0.90: 0.80, 0.95: 0.90, 0.98: 0.96, 0.99: 0.98}

table = {}
table[0.3652] = (0.646, 0.555, 0.527, 0.513, 0.505, 0.500, 0.496, 0.494,
     0.492, 0.490, 0.488, 0.487, 0.486, 0.486, 0.485, 0.484, 0.484, 0.483,
     0.483, 0.482, 0.482, 0.482, 0.481, 0.481, 0.481, 0.481, 0.480, 0.480, 
     0.480, 0.480, 0.480, 0.480, 0.479, 0.479, 0.479, 0.479, 0.479, 0.479, 
     0.479, 0.479, 0.479, 0.478, 0.478, 0.478, 0.478, 0.478, 0.478, 0.478, 
     0.478, 0.478)
table[0.6826] = (1.837, 1.321, 1.197, 1.141, 1.110, 1.090, 1.076, 1.066, 
     1.059, 1.052, 1.047, 1.043, 1.040, 1.037, 1.034, 1.032, 1.030, 1.028, 
     1.027, 1.025, 1.024, 1.023, 1.022, 1.021, 1.020, 1.019, 1.019, 1.018, 
     1.017, 1.017, 1.016, 1.016, 1.015, 1.015, 1.014, 1.014, 1.014, 1.013, 
     1.013, 1.012, 1.012, 1.012, 1.012, 1.011, 1.011, 1.011, 1.011, 1.010, 
     1.010, 1.010)
table[0.80] = (3.078, 1.886, 1.638, 1.533, 1.476, 1.440, 1.415, 1.397, 
     1.383, 1.372, 1.363, 1.356, 1.350, 1.345, 1.341, 1.337, 1.333, 1.330, 
     1.328, 1.325, 1.323, 1.321, 1.319, 1.318, 1.316, 1.315, 1.314, 1.313, 
     1.311, 1.310, 1.309, 1.309, 1.308, 1.307, 1.306, 1.306, 1.305, 1.304, 
     1.304, 1.303, 1.303, 1.302, 1.302, 1.301, 1.301, 1.300, 1.300, 1.299, 
     1.299, 1.299)
table[0.90] = (6.314, 2.920, 2.353, 2.132, 2.015, 1.943, 1.895, 1.860, 
     1.833, 1.812, 1.796, 1.782, 1.771, 1.761, 1.753, 1.746, 1.740, 1.734, 
     1.729, 1.725, 1.721, 1.717, 1.714, 1.711, 1.708, 1.706, 1.703, 1.701, 
     1.699, 1.697, 1.696, 1.694, 1.692, 1.691, 1.690, 1.688, 1.687, 1.686, 
     1.685, 1.684, 1.683, 1.682, 1.681, 1.680, 1.679, 1.679, 1.678, 1.677, 
     1.677, 1.676)
table[0.95] = (12.706, 4.303, 3.182, 2.776, 2.571, 2.447, 2.365, 2.306,
     2.262, 2.228, 2.201, 2.179, 2.160, 2.145, 2.131, 2.120, 2.110, 2.101, 
     2.093, 2.086, 2.080, 2.074, 2.069, 2.064, 2.060, 2.056, 2.052, 2.048, 
     2.045, 2.042, 2.040, 2.037, 2.035, 2.032, 2.030, 2.028, 2.026, 2.024, 
     2.023, 2.021, 2.020, 2.018, 2.017, 2.015, 2.014, 2.013, 2.012, 2.011, 
     2.010, 2.009)
table[0.9545] = (13.968, 4.527, 3.307, 2.869, 2.649, 2.517, 2.429, 2.366, 
     2.320, 2.284, 2.255, 2.231, 2.212, 2.195, 2.181, 2.169, 2.158, 2.149, 
     2.140, 2.133, 2.126, 2.120, 2.115, 2.110, 2.105, 2.101, 2.097, 2.093, 
     2.090, 2.087, 2.084, 2.081, 2.079, 2.076, 2.074, 2.072, 2.070, 2.068, 
     2.066, 2.064, 2.063, 2.061, 2.060, 2.058, 2.057, 2.056, 2.055, 2.053, 
     2.052, 2.051)
table[0.96] = (15.895, 4.849, 3.482, 2.999, 2.757, 2.612, 2.517, 2.449, 
     2.398, 2.359, 2.328, 2.303, 2.282, 2.264, 2.249, 2.235, 2.224, 2.214, 
     2.205, 2.197, 2.189, 2.183, 2.177, 2.172, 2.167, 2.162, 2.158, 2.154, 
     2.150, 2.147, 2.144, 2.141, 2.138, 2.136, 2.133, 2.131, 2.129, 2.127, 
     2.125, 2.123, 2.121, 2.120, 2.118, 2.116, 2.115, 2.114, 2.112, 2.111, 
     2.110, 2.109)
table[0.98] = (31.821, 6.965, 4.541, 3.747, 3.365, 3.143, 2.998, 2.896, 
     2.821, 2.764, 2.718, 2.681, 2.650, 2.624, 2.602, 2.583, 2.567, 2.552, 
     2.539, 2.528, 2.518, 2.508, 2.500, 2.492, 2.485, 2.479, 2.473, 2.467, 
     2.462, 2.457, 2.453, 2.449, 2.445, 2.441, 2.438, 2.434, 2.431, 2.429, 
     2.426, 2.423, 2.421, 2.418, 2.416, 2.414, 2.412, 2.410, 2.408, 2.407, 
     2.405, 2.403)
table[0.99] = (63.657, 9.925, 5.841, 4.604, 4.032, 3.707, 3.499, 3.355, 
     3.250, 3.169, 3.106, 3.055, 3.012, 2.977, 2.947, 2.921, 2.898, 2.878, 
     2.861, 2.845, 2.831, 2.819, 2.807, 2.797, 2.787, 2.779, 2.771, 2.763, 
     2.756, 2.750, 2.744, 2.738, 2.733, 2.728, 2.724, 2.719, 2.715, 2.712, 
     2.708, 2.704, 2.701, 2.698, 2.695, 2.692, 2.690, 2.687, 2.685, 2.682, 
     2.680, 2.678)
table[0.9973] = (235.784, 19.206, 9.219, 6.620, 5.507, 4.904, 4.530, 4.277, 
     4.094, 3.957, 3.850, 3.764, 3.694, 3.636, 3.586, 3.544, 3.507, 3.475, 
     3.447, 3.422, 3.400, 3.380, 3.361, 3.345, 3.330, 3.316, 3.303, 3.291, 
     3.280, 3.270, 3.261, 3.252, 3.244, 3.236, 3.229, 3.222, 3.216, 3.210,
     3.204, 3.199, 3.194, 3.189, 3.184, 3.180, 3.175, 3.171, 3.168, 3.164, 
     3.160, 3.157)

def t_repl(confLevel):
    return 1-2*(1-confLevel)

def t(confLevel, n, side=2):
    #若能查表则查表，表中无相关数据则计算
    if side == 2:
        if n <= 50 and confLevel in table:
            return table[confLevel][n-1]
        else:
            return float(tt.ppf(confLevel, n))
    elif side == 1:
        if n <= 50 and confLevel in rep:
            return table[rep[confLevel]][n-1]
        else:
            return float(tt.ppf(1-2*(1-confLevel), n))
